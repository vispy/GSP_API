- gsp_pydantic:
  - doesnt support transform chain properly
  - dont forget transform chain may be user-defined, take it into account in the serialization/deserialization
  - make TransformLinkImmediate the only link in gsp
  - code a transformLinkLoad in user space
  - make an example of it
- transform serialisation/deserialization
  - implemented but not tested
  - DONE make a actual examples, save
  - DONE need serialisation/deserialization in transform chain
  - DONE need to use them in gsp_pydantic
  - need serailization/deserialization tests 
- transform serialisation/deserialization
  - code a transformLinkLoad in user space
  - DONE link registry in transform link registry 
  - DONE thus can register user-defined transform link, important for deserialization
    - register a name and a class
    - https://github.com/jeromeetienne/gsp_01/blob/main/src/gsp/transform/transform_registry.py
  - DONE link MUST have `.deserialize()` and `.serialize()` methods
- import the `./tools/check_expected_output.py`
- motion/scroll events in viewport_events_matplotlib/network
  - Make a special event for scroll
- datoviz event: event are notified even when the mouse is outside of the figure
- handle 3d rotation in datoviz
  - how to handle that ? maybe i set it up to orthographic camera
- API design principles
  - "what are the good design principle to apply when designing an library API"
  - https://chatgpt.com/c/69162470-7220-8332-9df8-a928b77f0528
  - https://gemini.google.com/app/8fe8f99d920a68b5
- to get the screen type on macosx
  - `system_profiler SPDisplaysDataType`
  - `system_profiler SPHardwareDataType`
- test dynamic group in datoviz pixels
- when datoviz core dump, DVZ_LOG_LEVEL=0
  - when creating a datoviz app with 350 pixelds visual, there is a segfault
- handle the animation loop
  - with decorator like datoviz? yes
  - API from datoviz
  - API from matplotlib
  - GSP API common
- transformChain
  - with depth color
  - aka with renderer events
- transformChain with unit conversions - can this be done in user-space
  - data in ndc by default - aka -1 to 1 in current viewport
  - operation with scalar with unit pt/px/cm/inch
  - dpi canvas - === ppi on screen, dpi on print
  - dpi === PPI
  - in the transform chain, have a user data which store the current viewport size in px, and dpi
  - MathOpsLink (opts, scalar, units) in usespace
    - op_code
    - scalar_value (in input buffer_type)
    - scalar_unit
  - how to pass the canvas to the transform chain?
    - can this be done in userspace
    - possibility: set by class or by instance



---
- DONE do test with expected_screenshots
- DONE example helper
  - with env variable GSP_RENDERER to select the renderer
  - matplotlib
  - datoviz
  - network
- DONE make tmp/dpi_stuff/mpl_accurate_figure_gemini_1.py a real example on top of GSP
  - done in `examples/figure_inch_matplotlib.py`
- DONE network animator with video save doesnt quit the scripts
- DONE how to handle camera control in GSP, aka same events for various renderers matplotlib/datoviz/network
  - with mouse events
  - with API
  - windowEventNetwork/Matplotlib/Datoviz, with a common base class
  - handle pan/zoom/rotate
  - matplotlib event doc https://matplotlib.org/stable/users/explain/figure/event_handling.html
  - datoviz event doc 
    - https://datoviz.org/guide/input
    - https://datoviz.org/guide/interactivity/#camera-interactivity-3d
- DONE camera controller awsdqe on top of the windowEventBase
- DONE camera controller trackball on top of the windowEventBase
  - https://github.com/rougier/matplotlib-3d/blob/master/mpl3d/trackball.py
- DONE datoviz viewport is bad at diagnosticating sending events to the right viewport
- DONE datoviz bug: viewport are not in the proper order
- DONE ExampleHelper: 
  - `ExampleHelper.create_animator(rendererBase) -> AnimatorBase`
  - `ExampleHelper.create_animator_save_video(rendererBase) -> WindowEventBase`
- DONE in animator, add a `AnimatorBase` in all animator 
- DONE window events with multiple viewports
  - recode all the viewport events using the same structure
- DONE animator: handle datoviz animator
- DONE make an example of viewport_events
- DONE animator: handle saving video on network/matplotlib
- DONE in trackball, notify -1 +1, not [0,+1]
- DONE PR datoviz with the whole ./datoviz as pyright 0 errors
  - add a pyright target in justfile
- DONE datoviz network doesnt work as it is unable to take screenshots
- DONE Complete serialisation/deserialization for all visuals
- DONE do a 'big tester' example
  - something with arguments which can be changed from command line
  - thus it can be intrumented to cover all the cases in combinations
  - multi-viewports
  - with and without serialisation
  - with and without http server
  - all visuals - various scenes
  - all renderers
  - using transform or buffer as input
- DONE gsp_network to specify the scene renderer on a remote server
  - easier to test
- DONE pdf/svg output for matplotlib
- DONE do something multi viewport
- DONE do serialisation with json
- DONE do network with http
- DONE implement points in datoviz
- WONTDO for each example, `_matplotlib` `_datoviz` and `_both`
  - have a test_runner ?
- PR for datoviz
  - DONE issue on n_groups missing in .paths() constructor
  - DONE issue of static type checking in .segments() cap
  - DONE add test layers (with visual regression)
- DONE code segments - matplotlib + datoviz
  - positions is [start, end]*n
  - color rgba8 * n
  - line_width float32 * n
  - cap: butt, round, square
- DONE implement path in matplotlib + datoviz
  - issue to mix the multiple paths and the groups attributes


---
# Trying to figure out the DPI/PPI mess
screen size in 
- millimeter
- hw pixel
- logical pixel

-  'from there find the formula for the other paramters' as a next steps

the point is to get the minimal parmeters
- then find the formula to get the other parameters
- we need to progress slowly to be sure we understand/agree those concepts

i dont see anything so hard, just messy
